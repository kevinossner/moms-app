<h1>{{ selectedDate }}</h1>
<div *ngFor="let course of courses; let i = index">
  <mat-card class="appointment-card">
    <mat-card-header>
      <mat-card-title-group>
        <mat-card-title
          ><h2>{{ course.name }}</h2></mat-card-title
        >
      </mat-card-title-group>
    </mat-card-header>
    <mat-card-content>
      <div class="row">
        <div class="col">
          <mat-icon>people</mat-icon>
          <mat-icon *ngIf="i !== selectedCardIndex" (click)="onExpand(i)"
            >expand_more</mat-icon
          >
          <mat-icon *ngIf="i == selectedCardIndex" (click)="onCollapse(i)"
            >expand_less</mat-icon
          >
          <p>{{ appointments[i].momsAttended.length }}/{{ course.moms.length }}</p>
          <div *ngIf="i == selectedCardIndex">
            <mat-list *ngFor="let mom of selectedMoms; let j = index">
              <mat-list-item>
                <div class="row">
                  <div class="col-9">{{ mom.firstName }} {{ mom.lastName }}</div>
                  <div class="col-3">
                    <mat-checkbox
                      [checked]="appointments[i].momsAttended.includes(mom.id)"
                      (change)="onCheckChange($event, i, j)"
                    >
                    </mat-checkbox>
                  </div>
                </div>
              </mat-list-item>
            </mat-list>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
<button mat-fab class="back-btn" (click)="onBack()">
  <mat-icon>arrow_back_ios_new</mat-icon>
</button>

<!-- <h1>{{ selectedDate }}</h1>
<div *ngFor="let course of courses; let i = index">
  <mat-card class="appointment-card">
    <mat-card-header>
      <mat-card-title-group>
        <mat-card-title
          ><h2>{{ course.name }}</h2></mat-card-title
        >
      </mat-card-title-group>
      <button mat-icon-button (click)="openDialog(template, appointments[i].id)">
        <mat-icon class="colored-icon">close</mat-icon>
      </button>
    </mat-card-header>
    <mat-card-content>
      <mat-list>
        <div mat-subheader><mat-icon matListItemIcon>people</mat-icon></div>
        <p>{{courseRegistrations}}</p>
        <div *ngFor="let courseRegistration of courseRegistrations">
          {{courseRegistration.courseId}}
          <div *ngIf="courseRegistration.courseId === course.id">
            <div *ngFor="let registration of courseRegistration.registrations">
              <mat-list-item>
                <button mat-icon-button (click)="onDeleteRegistration(registration.id)">
                  <mat-icon class="colored-icon">close</mat-icon>
                </button>
                {{ registration.mom.firstName }} {{ registration.mom.lastName }}
                <mat-checkbox
                [checked]="registration.attended"
                (change)="setAll(registration.id, $event.checked)">
                </mat-checkbox>
              </mat-list-item>
            </div>
          </div>
        </div>
      </mat-list>
    </mat-card-content>
  </mat-card>
</div>
<button mat-fab class="back-btn" (click)="onBack()">
  <mat-icon>arrow_back_ios_new</mat-icon>
</button>

<ng-template #template>
  <mat-card class="delete-confirm">
    <mat-card-content>
      <p>Bist du sicher?</p>
    </mat-card-content>
    <mat-card-actions>
      <button mat-flat-button (click)="onCancel()">Nein</button>
      <button mat-flat-button color="warn" (click)="onDeleteAppointment()">
        Ja
      </button>
    </mat-card-actions>
  </mat-card>
</ng-template> -->
